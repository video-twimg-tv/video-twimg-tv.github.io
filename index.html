<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Video Twimg TV</title>

<style>
body{
  margin:0;
  font-family:system-ui,Arial;
  background:#05040a;
  color:#fff;
}
.wrap{max-width:560px;margin:auto;padding:70px 16px}
.utility-bar{
  position:fixed;top:0;left:0;right:0;
  background:#000;height:44px;
  display:flex;align-items:center;justify-content:center;
  z-index:9;
}
.utility-bar a{color:#fff;text-decoration:none;font-weight:600;margin:0 8px}
.card{
  display:block;
  margin-bottom:16px;
  border-radius:12px;
  overflow:hidden;
  background:#111;
  text-decoration:none;
  color:#fff;
}
.thumb{height:180px;background:#222;position:relative}
.thumb img{width:100%;height:100%;object-fit:cover}
.overlay{
  position:absolute;bottom:10px;left:10px;right:10px;
  display:flex;justify-content:space-between;align-items:center;
}
.play-pill{
  background:#ffd07a;color:#111;
  padding:6px 12px;border-radius:999px;
  font-weight:700;
}
button{
  padding:12px 20px;
  border-radius:999px;
  border:none;
  font-weight:700;
}
#shuffle{margin-bottom:16px}
footer{text-align:center;color:#aaa;font-size:13px;margin-top:30px}
</style>
</head>

<body>

<div class="utility-bar">
  <a href="#report">Report</a> |
  <a href="https://video-twimg-tv.github.io/donate" target="_blank">Donate ❤️</a> |
  <a href="#ads">Advertise</a>
</div>

<div class="wrap">
  <button id="shuffle">Shuffle</button>
  <div id="list"></div>
  <footer>© Video Twimg TV <span id="year"></span></footer>
</div>

<script>
(async function(){

/* =========================
   CONFIG
========================= */
const REPO = 'video-twimg-tv/video-twimg-tv.github.io';
const BRANCH = 'main';
const IGNORE = ['index.html','README.md'];
const DEFAULT_THUMB = 'https://cdn.aceimg.com/90acd6182.jpg';

/* ========================= */
const list = document.getElementById('list');
document.getElementById('year').textContent = new Date().getFullYear();

async function getVideos(){
  const res = await fetch(`https://api.github.com/repos/${REPO}/contents/?ref=${BRANCH}`);
  const data = await res.json();

  return data
    .filter(f =>
      f.type === 'file' &&
      f.name.endsWith('.mp4') &&
      !IGNORE.includes(f.name)
    )
    .map((f,i)=>({
      id:i+1,
      title:f.name,
      url:f.download_url,
      thumb:DEFAULT_THUMB
    }));
}

function render(videos){
  list.innerHTML='';
  videos.forEach(v=>{
    const a=document.createElement('a');
    a.className='card';
    a.href=v.url;
    a.target='_blank';
    a.innerHTML=`
      <div class="thumb">
        <img src="${v.thumb}">
        <div class="overlay">
          <div>${v.title}</div>
          <div class="play-pill">▶ Play</div>
        </div>
      </div>
    `;
    list.appendChild(a);
  });
}

let videos = await getVideos();
render(videos);

document.getElementById('shuffle').onclick=()=>{
  videos.sort(()=>Math.random()-0.5);
  render(videos);
};

})();
</script>

</body>
</html>
